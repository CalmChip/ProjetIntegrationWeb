<div class="container">
    <div class="card" style="display: flex; margin-top: 30px; font-size: x-large;">
        <p class="text-end" style="margin: 1%;"><a class="btn btn-dark btn-block btn-lg" href="/" style="margin-top:10px;">Retour</a></p> 
        <div class="d-flex">
                <div style="margin-bottom: 2.5%;  margin-left: 20px;"><h1 class="text-start overflow" style="position: absolute; margin-top: -56px; width: 10em;"><%= product.productName %></h1>
                    <% if (typeof product.productPicture != "undefined") { %>
                        <img
                            style="min-height: 12rem; min-width: 12rem;"
                            src="/pictures/<%= product.productPicture  %>"
                            alt="Product Picture"
                        />
                    <% } else { %>
                        <img
                        style="min-height: 12rem; min-width: 12rem;"
                        src="https://assets2.razerzone.com/images/pnx.assets/a54bdf79abdfc0d42a0fff19047725a3/deathstalker-v2-pro_500x500.png"
                        alt="Product Picture"
                        />
                    <% } %>
            
                </div>
                
                <div style="position: relative; margin-top: 50px; margin-left: 45px;">
                    <p><strong>Prix: </strong> <%= product.price %> $</p>
                    <p><strong>Type: </strong> <%= product.type %></p>
                    <p><strong>Seller: </strong><%= product.seller %></p>
                </div></div>
                <p class="container" style="margin-left: 10px;"><strong>Description:</strong><br> <%= product.desc %></p>
                 <!-- Boutton qui redirect pour communiquer avec le vendeur -->
                 <% if (typeof user == "undefined") { %>
                    <p class="text-center" style="margin-top: 2%; font-size: 20px;"><strong >Support: </strong><a href="/users/login" style="margin-top:10px; color: rgb(9, 9, 138);">Sign In to contact seller about this product</a></p> 
                    <% } else { %>
                    <p class="text-center" style="margin-top: 2%; font-size: 20px;"><strong >Support: </strong><a href="/chats/<%=product._id%>/<%=user._id%>" style="margin-top:10px; color: rgb(9, 9, 138);">Contact seller about this product</a></p> 
                    <% } %>
                    <p class="text-center" style="margin: 1%;">
                      <a
                        class="btn btn-primary bg text-white"
                        role="button"
                        onclick="addToCart('<%= product._id %>')"
                        >Ajouter au Cart</a>
                    </p>
        </div>
    
    </div>
 
</div>

<script>
    function addToCart(id) {
    console.log(id);
    fetch(`http://127.0.0.1:8000/carts/cart/${id}`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
    })
      .then(() => {
        alert("Item added successfully to the cart");
      })
      .catch((error) => {
        if (error) throw error;
      });
  }
</script>
